<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Kakao 지도 시작하기</title>
</head>
<body>
<h1>지도 생성하는 코드</h1>
<div id="map" style="width:500px;height:400px;"></div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=023855f0a78a87bb9407e335c59f0005&libraries=services"></script>

<script>
    var container = document.getElementById('map');
    var options = {
        center: new kakao.maps.LatLng(37.46369169, 126.6502972),
        level: 4
    };

    var map = new kakao.maps.Map(container, options); // 지도 생성

    var ps = new kakao.maps.services.Places(); // 장소 검색하는 객체 생성

    ps.keywordSearch('헬스장', placesSearchCB); // 키워드로 장소 검색

    function placesSearchCB(data, status, pagination) { // 검색 완료 시 호출되는 함수
        if (status === kakao.maps.services.Status.OK) { // 검색된 장소 데이터 확인

            console.log('검색 결과:', data);

            for (var i = 0; i < data.length; i++) { // 검색 결과로 받은 장소에 마커 표시
                displayMarker(data[i]);
            }
        } else {
            console.log('검색 실패:', status); // 검색 실패 시 상태 코드 출력
        }
    }

    function displayMarker(place) { // 지도에 마커를 표시하는 함수

        console.log('마커 좌표:', place.y, place.x); // 좌표 값 확인

        var marker = new kakao.maps.Marker({         // 마커를 생성하고 지도에 표시
            map: map,
            position: new kakao.maps.LatLng(place.y, place.x) // LatLng으로 마커 위치 지정
        });

        kakao.maps.event.addListener(marker, 'click', function() {
            alert(place.place_name); // 마커 클릭 시 장소 이름을 알림으로 표시
        });
    }
</script>

</body>
</html>
