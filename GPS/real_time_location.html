<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>실시간 위치 추적하기</title>
    <style>
        #map {
            width: 100%;
            height: 400px;
        }
    </style>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=023855f0a78a87bb9407e335c59f0005"></script>
</head>
<body>
<div id="map"></div>
<script>
        // 지도 초기화
        var mapContainer = document.getElementById('map');
        var mapOption = {
            center: new kakao.maps.LatLng(37.5665, 126.9780), // 서울 좌표 (임시 초기값)
            level: 5 // 지도 확대 레벨
        };
        var map = new kakao.maps.Map(mapContainer, mapOption);

        // 마커 초기화
        var marker = new kakao.maps.Marker({
            map: map,
            position: mapOption.center
        });

        // 실시간 위치 추적 시작
        function startTracking() {
            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(function(position) {
                    var lat = position.coords.latitude;
                    var lon = position.coords.longitude;
                    var locPosition = new kakao.maps.LatLng(lat, lon);

                    // 마커 위치 업데이트
                    marker.setPosition(locPosition);

                    // 지도 중심을 현재 위치로 이동
                    map.setCenter(locPosition);
                }, showError, {
                    enableHighAccuracy: true,
                    maximumAge: 0,
                    timeout: 5000
                });
            } else {
                alert("이 브라우저는 Geolocation을 지원하지 않습니다.");
            }
        }

        // 오류 처리 함수
        function showError(error) {
            var errorTypes = {
                0: "알 수 없는 에러가 발생했습니다.",
                1: "위치 정보를 제공하지 않았습니다.",
                2: "위치 정보를 사용할 수 없습니다.",
                3: "위치 정보를 가져오는 데 시간이 초과되었습니다."
            };
            var errorMsg = errorTypes[error.code];
            alert("에러 발생: " + errorMsg);
        }

        // 실시간 위치 추적 시작
        startTracking();
    </script>
</body>
</html>
